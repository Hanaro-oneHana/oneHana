generator client {
  provider = "prisma-client-js"
  output   = "../lib/generated/prisma"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model account {
  id           Int     @id @default(autoincrement()) @db.UnsignedInt
  account      String  @db.VarChar(31)
  balance      BigInt  @default(0)
  type         Int     @db.TinyInt
  withdraw_cnt Int     @default(0) @db.TinyInt
  expire_date  String? @db.VarChar(31)
  user_id      Int     @db.UnsignedInt
  user         user    @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_account_user")

  @@index([user_id], map: "fk_account_user")
}

model budgetplan {
  id                 Int            @id @default(autoincrement()) @db.UnsignedInt
  user_id            Int            @db.UnsignedInt
  partner_service_id Int            @db.UnsignedInt
  partnerservice     partnerservice @relation(fields: [partner_service_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_budget_service")
  user               user           @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_budget_user")

  @@index([partner_service_id], map: "fk_budget_service")
  @@index([user_id], map: "fk_budget_user")
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model depositinterest {
  id     Int     @id @db.UnsignedInt
  period Int     @db.TinyInt
  rate   Decimal @db.Decimal(5, 2)
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model loaninterest {
  id     Int     @id @db.UnsignedInt
  period Int     @db.TinyInt
  rate   Decimal @db.Decimal(5, 2)
}

model partner {
  id                  Int              @id @default(autoincrement()) @db.UnsignedInt
  name                String           @db.VarChar(30)
  partner_category_id Int              @db.UnsignedInt
  phone               String           @db.VarChar(20)
  email               String?          @db.VarChar(30)
  address             String           @db.VarChar(30)
  discount_rate       Decimal          @default(0.00) @db.Decimal(5, 2)
  service_detail      String           @db.Text
  is_active           Boolean          @default(true)
  partnercategory     partnercategory  @relation(fields: [partner_category_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_partner_category")
  partnerservice      partnerservice[]

  @@index([partner_category_id], map: "fk_partner_category")
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model partnercalendar {
  id                 Int            @id @db.UnsignedInt
  user_id            Int            @db.UnsignedInt
  reservation_date   String         @db.VarChar(31)
  partner_service_id Int            @db.UnsignedInt
  partnerservice     partnerservice @relation(fields: [partner_service_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_partnercalender_service")
  user               user           @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_partnercalender_user")

  @@index([partner_service_id], map: "fk_partnercalender_service")
  @@index([user_id], map: "fk_partnercalender_user")
}

model partnercategory {
  id      Int       @id @db.UnsignedInt
  type    String    @db.VarChar(30)
  partner partner[]
}

model partnerservice {
  id              Int               @id @db.UnsignedInt
  partner_id      Int               @db.UnsignedInt
  name            String            @db.VarChar(20)
  content         Json
  budgetplan      budgetplan[]
  partnercalendar partnercalendar[]
  partner         partner           @relation(fields: [partner_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_service_partner")
  usercalendar    usercalendar[]

  @@index([partner_id], map: "fk_service_partner")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model user {
  id              Int               @id @default(autoincrement()) @db.UnsignedInt
  name            String            @db.VarChar(20)
  password        String            @db.VarChar(255)
  phone           String            @db.VarChar(20)
  birth           DateTime          @db.Date
  email           String            @db.VarChar(31)
  code            String?           @db.VarChar(15)
  mate_code       String?           @db.VarChar(15)
  type            Int               @default(0) @db.TinyInt
  account         account[]
  budgetplan      budgetplan[]
  partnercalendar partnercalendar[]
  usercalendar    usercalendar[]
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model usercalendar {
  id                 Int            @id @db.UnsignedInt
  user_id            Int            @db.UnsignedInt
  user_date          String         @db.VarChar(31)
  partner_service_id Int            @db.UnsignedInt
  partnerservice     partnerservice @relation(fields: [partner_service_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_usercalender_service")
  user               user           @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_usercalender_user")

  @@index([partner_service_id], map: "fk_usercalender_service")
  @@index([user_id], map: "fk_usercalender_user")
}
